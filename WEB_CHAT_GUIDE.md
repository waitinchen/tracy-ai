# 🌐 本地 Web 對話界面使用指南

## 🚀 快速開始

### 1. 啟動 Web 服務器

```bash
py start_web_chat.py
```

### 2. 打開瀏覽器訪問

**本地網址：**
```
http://localhost:8001
```

或

```
http://127.0.0.1:8001
```

---

## 📋 功能說明

### Web 界面功能

- ✅ **美觀的對話界面**
  - 漸層背景設計
  - 響應式佈局
  - 現代化 UI

- ✅ **即時對話**
  - 輸入文字即時發送
  - 自動顯示語氣標籤
  - 自動播放語音

- ✅ **語音播放**
  - 自動播放黃蓉語音
  - 內建音訊播放器
  - 顯示處理狀態

---

## 🎯 使用方式

1. **啟動服務器**
   ```bash
   py start_web_chat.py
   ```

2. **打開瀏覽器**
   - 訪問 http://localhost:8001

3. **開始對話**
   - 在輸入框輸入文字
   - 點擊「發送」或按 Enter
   - 等待語音產生並自動播放

4. **查看結果**
   - 用戶訊息顯示在右側（藍色）
   - 黃蓉回應顯示在左側（白色）
   - 語氣標籤會顯示在回應下方
   - 音訊會自動播放

---

## 📝 對話範例

### 測試對話

1. **輸入：** "你好，我是黃蓉！"
   - 系統會加上語氣標籤
   - 產生語音並播放

2. **輸入：** "你知道嗎？我真的好感動。"
   - 系統會判斷為 [crying][softly]
   - 產生帶情緒的語音

3. **繼續對話**
   - 可以連續輸入多條訊息
   - 對話歷史會保留在界面上

---

## 🔧 API 端點

### 對話 API
- **POST** `/api/chat`
  - 處理對話請求
  - 返回語音 URL

### 語音流 API
- **POST** `/api/chat/stream`
  - 直接返回音訊流

### 健康檢查
- **GET** `/health`
  - 檢查服務狀態

---

## 💡 提示

1. **首次使用**
   - 確保所有 API Key 已設定
   - 確認服務器正常啟動

2. **瀏覽器相容性**
   - 建議使用 Chrome、Edge 或 Firefox
   - 確保瀏覽器支援音訊播放

3. **網路連線**
   - 需要連線到 ElevenLabs API
   - 需要連線到 OpenAI API（如果使用 LLM）

---

## 🐛 常見問題

### Q: 無法訪問網址？
A: 
- 確認服務器已啟動
- 檢查防火牆設定
- 嘗試使用 127.0.0.1 代替 localhost

### Q: 語音無法播放？
A: 
- 檢查瀏覽器音訊權限
- 確認音訊檔案已產生
- 檢查瀏覽器控制台錯誤訊息

### Q: API 錯誤？
A: 
- 檢查 .env 檔案設定
- 確認 API Key 有效
- 查看服務器終端錯誤訊息

---

## 📊 界面預覽

```
┌─────────────────────────────────┐
│  🎤 黃蓉語音對話系統            │
│  輸入文字，聽黃蓉說話            │
├─────────────────────────────────┤
│                                 │
│  [用戶訊息]                     │
│  你好，我是黃蓉！                │
│                                 │
│  [黃蓉回應]                     │
│  你好，我是黃蓉！                │
│  標籤: [happy] 你好，我是黃蓉！ │
│  [音訊播放器]                   │
│                                 │
├─────────────────────────────────┤
│  [輸入框] [發送按鈕]            │
└─────────────────────────────────┘
```

---

## 🎉 開始使用

**立即啟動：**
```bash
py start_web_chat.py
```

**然後訪問：**
```
http://localhost:8001
```

**開始對話！** 🎤✨


